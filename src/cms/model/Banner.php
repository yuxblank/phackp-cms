<?phpnamespace cms\model;use PDO;use yuxblank\phackp\core\Application;use yuxblank\phackp\database\Model;/* * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. *//** * Description of Banner * * @author yuri.blanc */class Banner extends Model {    public $id;    public $title;    public $image;    public $code;    public $url;    public $type;    public $user_id;    public $clicks;    public $views;    public $status;        public function user() {        return $this->hasOne(User::class);    }    public function countActive()    {        return count($this->find("WHERE status=?", 1));    }    public function getTotalClicks(){        $stm = $this->getPDO()->prepare('select SUM(clicks) as totalclicks FROM banner ');        $stm->execute();        return $stm->fetch(PDO::FETCH_LAZY);    }    public function getTotalViews(){        $stm = $this->getPDO()->prepare('select SUM(views) as totalviews FROM banner ');        $stm->execute();        return $stm->fetch(PDO::FETCH_LAZY);    }    public function getState() {        if ($this->status == 0) {            return "Non attivo";        } else if ($this->status == 1) {            return "Pubblicato";        }    }    public function view() {        $this->views++;        $this->update();    }    public function getImagePath(){        return Application::$ROOT . "/public/images/banners/" . $this->image;    }}