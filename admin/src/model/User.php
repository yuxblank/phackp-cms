<?phpnamespace cms\model;use cms\library\crud\CrudModel;use yuxblank\phackp\database\Model;/* * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. *//** * Description of User * * @author yuri.blanc */class User extends Model implements CrudModel{    public $id;    public $email;    public $password;    public $userrole_id;    public $date_created;    public $status;    /**     * @return null|UserRole     */    public function role(){        return $this->hasOne(UserRole::class);    }    public function isCustomer(): bool    {        return $this->role()->title === UserRole::CUSTOMER;    }    public function isAdmin(): bool    {        return $this->role()->title === UserRole::ADMINISTRATOR;    }    public function isSuperAdmin(): bool    {        return $this->role()->title === UserRole::SUPERADMIN;    }    public function getStatus()    {        switch ($this->status) {            case 0 :                return "Bloccato";                break;            case 1 :                return "Attivo";                break;        }    }    public function getStates()    {        return array("Bloccato", "Attivo");    }    public function countActive(): int    {        return $this->count("WHERE status=?", 1);    }    /**     * Return true if the passed role number is less then or equal the user role     * @param $role     * @return bool     */    public function isAuthorized($role): bool    {        return $this->role()->level >= $role;    }    public function alreadyExist()    {        if ($this->find("WHERE email=?", $this->email)) {            return true;        }    }    public function formDefinition(): array    {        return [            'email' => ['input' => ['type' => 'email', 'required' => true]],            'password' => ['input' => ['type' => 'password', 'required' => true]],            'role' => ['select' => ['options' => $this->role(), 'required' => true]],            'status' => ['select' => ['options' => $this->getStates(), 'required' => true]],        ];    }}